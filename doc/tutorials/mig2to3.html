<h1 id="migration-from-rivet-v2-to-rivet-v3">Migration from Rivet v2 to Rivet v3</h1>
<p>Rivet 3.x is a major new release series, in which we've made some big changes that affect the programming interface (or &quot;API&quot;) exposed to analysis authors. Fear not: the changes are simple, and all beneficial to routine writers... it's just the need for transition that's a bit unfortunate. Here is a <em>very</em> quick guide for updating your analysis code from v2 to v3:</p>
<ul>
<li>The <code>addProjection(...)</code> function no longer exists: replace uses of this with <code>declare(...)</code>.</li>
<li>Similarly, <code>applyProjection()</code> should now be <code>apply()</code>. Fewer characters to type: yay!</li>
<li>There is also a change in the histogram-booking syntax from e.g. <code>_h_xxx = bookHisto1D(...)</code> to <code>book(_h_xxx, ...)</code></li>
<li>You should no longer attempt to access &quot;the&quot; event weight, since that's now done automatically and for all weights in the systematics vector: <code>_h_xxx-&gt;fill(x, event.weight())</code> becomes <code>_h_xxx-&gt;fill(x)</code>.</li>
</ul>
<p>We recommend that anyone writing a new analysis should start by running the <code>rivet-mkanalysis</code> script rather than directly copying an old analysis code: we update the templates generated by the script as new API features and ideas occur, and it always represents best-practice. You can still copy-paste chunks from your old analysis as you need them, modulo the unavoidable API changes above.</p>
