<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rivet: Rivet::ProjectionHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxycustom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rivet.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rivet
   &#160;<span id="projectnumber">3.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceRivet.html">Rivet</a></li><li class="navelem"><a class="el" href="classRivet_1_1ProjectionHandler.html">ProjectionHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classRivet_1_1ProjectionHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Rivet::ProjectionHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The projection handler is a central repository for projections to be used in a <a class="el" href="namespaceRivet.html">Rivet</a> analysis run.  
 <a href="classRivet_1_1ProjectionHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ProjectionHandler_8hh_source.html">ProjectionHandler.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:acb9139e359aa2e2579459e424e59c69f"><td class="memItemLeft" align="right" valign="top"><a id="acb9139e359aa2e2579459e424e59c69f"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#acb9139e359aa2e2579459e424e59c69f">ProjDepth</a> { <b>SHALLOW</b>, 
<b>DEEP</b>
 }<tr class="memdesc:acb9139e359aa2e2579459e424e59c69f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum to specify depth of projection search. <br /></td></tr>
</td></tr>
<tr class="separator:acb9139e359aa2e2579459e424e59c69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f35964fc0d685227e2875f296782483"><td class="memItemLeft" align="right" valign="top"><a id="a8f35964fc0d685227e2875f296782483"></a>
typedef set&lt; <a class="el" href="namespaceRivet.html#adb3ed9f007f0e9641a8fa7cbfb7a06a6">ProjHandle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#a8f35964fc0d685227e2875f296782483">ProjHandles</a></td></tr>
<tr class="memdesc:a8f35964fc0d685227e2875f296782483"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef for a vector of <a class="el" href="classRivet_1_1Projection.html" title="Base class for all Rivet projections. ">Projection</a> pointers. <br /></td></tr>
<tr class="separator:a8f35964fc0d685227e2875f296782483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26fba63043480bfb1a5045f7fa4aa7e"><td class="memItemLeft" align="right" valign="top"><a id="af26fba63043480bfb1a5045f7fa4aa7e"></a>
typedef map&lt; string, <a class="el" href="namespaceRivet.html#adb3ed9f007f0e9641a8fa7cbfb7a06a6">ProjHandle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#af26fba63043480bfb1a5045f7fa4aa7e">NamedProjs</a></td></tr>
<tr class="memdesc:af26fba63043480bfb1a5045f7fa4aa7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef for the structure used to contain named projections for a particular containing <a class="el" href="classRivet_1_1Analysis.html" title="This is the base class of all analysis classes in Rivet. ">Analysis</a> or <a class="el" href="classRivet_1_1Projection.html" title="Base class for all Rivet projections. ">Projection</a>. <br /></td></tr>
<tr class="separator:af26fba63043480bfb1a5045f7fa4aa7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Projection registration</div></td></tr>
<tr class="memitem:a0463ed1f50c32edd473b3ba8756b95e2"><td class="memItemLeft" align="right" valign="top"><a id="a0463ed1f50c32edd473b3ba8756b95e2"></a>
const <a class="el" href="classRivet_1_1Projection.html">Projection</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#a0463ed1f50c32edd473b3ba8756b95e2">registerProjection</a> (const <a class="el" href="classRivet_1_1ProjectionApplier.html">ProjectionApplier</a> &amp;parent, const <a class="el" href="classRivet_1_1Projection.html">Projection</a> &amp;proj, const string &amp;name)</td></tr>
<tr class="memdesc:a0463ed1f50c32edd473b3ba8756b95e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach and retrieve a projection as a reference. <br /></td></tr>
<tr class="separator:a0463ed1f50c32edd473b3ba8756b95e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Projection retrieval. */</div></td></tr>
<tr class="memitem:a61ec344d7dc0727a404b7a8699eb65af"><td class="memItemLeft" align="right" valign="top"><a id="a61ec344d7dc0727a404b7a8699eb65af"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#a61ec344d7dc0727a404b7a8699eb65af">hasProjection</a> (const <a class="el" href="classRivet_1_1ProjectionApplier.html">ProjectionApplier</a> &amp;parent, const string &amp;name) const</td></tr>
<tr class="memdesc:a61ec344d7dc0727a404b7a8699eb65af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there is a <em>name</em> projection registered by <em>parent</em>. <br /></td></tr>
<tr class="separator:a61ec344d7dc0727a404b7a8699eb65af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2131ec98d157ab3952a48950323d012"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classRivet_1_1Projection.html">Projection</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#aa2131ec98d157ab3952a48950323d012">getProjection</a> (const <a class="el" href="classRivet_1_1ProjectionApplier.html">ProjectionApplier</a> &amp;parent, const string &amp;name) const</td></tr>
<tr class="separator:aa2131ec98d157ab3952a48950323d012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb615b50a66c60f6e9c55141684172d"><td class="memItemLeft" align="right" valign="top">set&lt; const <a class="el" href="classRivet_1_1Projection.html">Projection</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#a2eb615b50a66c60f6e9c55141684172d">getChildProjections</a> (const <a class="el" href="classRivet_1_1ProjectionApplier.html">ProjectionApplier</a> &amp;parent, <a class="el" href="classRivet_1_1ProjectionHandler.html#acb9139e359aa2e2579459e424e59c69f">ProjDepth</a> depth=SHALLOW) const</td></tr>
<tr class="separator:a2eb615b50a66c60f6e9c55141684172d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:afab4a85a605cd8ba8b5dc66c515258a5"><td class="memItemLeft" align="right" valign="top"><a id="afab4a85a605cd8ba8b5dc66c515258a5"></a>
static <a class="el" href="classRivet_1_1ProjectionHandler.html">ProjectionHandler</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#afab4a85a605cd8ba8b5dc66c515258a5">getInstance</a> ()</td></tr>
<tr class="memdesc:afab4a85a605cd8ba8b5dc66c515258a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton creation function. <br /></td></tr>
<tr class="separator:afab4a85a605cd8ba8b5dc66c515258a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ad02cdb72e26fcc20ea189253c40373a8"><td class="memItemLeft" align="right" valign="top"><a id="ad02cdb72e26fcc20ea189253c40373a8"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRivet_1_1ProjectionHandler.html#ad02cdb72e26fcc20ea189253c40373a8">ProjectionApplier</a></td></tr>
<tr class="memdesc:ad02cdb72e26fcc20ea189253c40373a8"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classRivet_1_1ProjectionApplier.html" title="Common base class for Projection and Analysis, used for internal polymorphism. ">ProjectionApplier</a>'s destructor needs to trigger cleaning up the proj handler repo. <br /></td></tr>
<tr class="separator:ad02cdb72e26fcc20ea189253c40373a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The projection handler is a central repository for projections to be used in a <a class="el" href="namespaceRivet.html">Rivet</a> analysis run. </p>
<p>Without centralised projections, it can be hard to know which of an equivalent set of projections will be run on a particular event. In turn, this may mean that certain projections in the chain can go out of scope unexpectedly. There were originally also the issues that projections may need to be held as member pointers to an abstract base class, since post-construction setup is needed; that projections contained pointers to their own dependency chain, which could go out of scope; and that projection members could be modified after being applied to an event which, due to the caching model, would have unpredictable consequences.</p>
<p>By centralising all the projections, these issues are eliminated, as well as allowing analysis classes to contain fewer data members (since projections are now better accessed by name than by storing a data member reference or pointer).</p>
<p>The core of the <a class="el" href="classRivet_1_1ProjectionHandler.html" title="The projection handler is a central repository for projections to be used in a Rivet analysis run...">ProjectionHandler</a> design is that it is a singleton class, essentially a wrapper around a map of <code>Projection*</code>, indexed by a hash of the registering object and its local name for the registered projection. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2eb615b50a66c60f6e9c55141684172d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb615b50a66c60f6e9c55141684172d">&#9670;&nbsp;</a></span>getChildProjections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set&lt;const <a class="el" href="classRivet_1_1Projection.html">Projection</a>*&gt; Rivet::ProjectionHandler::getChildProjections </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRivet_1_1ProjectionApplier.html">ProjectionApplier</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRivet_1_1ProjectionHandler.html#acb9139e359aa2e2579459e424e59c69f">ProjDepth</a>&#160;</td>
          <td class="paramname"><em>depth</em> = <code>SHALLOW</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get child projections for the given parent. By default this will just return the projections directly contained by the <em>parent</em>, but the <em>depth</em> argument can be changed to do a deep retrieval, which will recurse through the whole projection chain. In this case, there is no protection against getting stuck in a circular projection dependency loop. </p>

<p class="reference">Referenced by <a class="el" href="classRivet_1_1ProjectionHandler.html#afab4a85a605cd8ba8b5dc66c515258a5">getInstance()</a>, and <a class="el" href="classRivet_1_1ProjectionApplier.html#a02b849787ab8fee37698db929d61912a">Rivet::ProjectionApplier::getProjections()</a>.</p>

</div>
</div>
<a id="aa2131ec98d157ab3952a48950323d012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2131ec98d157ab3952a48950323d012">&#9670;&nbsp;</a></span>getProjection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classRivet_1_1Projection.html">Projection</a>&amp; Rivet::ProjectionHandler::getProjection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRivet_1_1ProjectionApplier.html">ProjectionApplier</a> &amp;&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve a named projection for the given parent. Returning as a reference is partly to discourage <a class="el" href="classRivet_1_1ProjectionApplier.html" title="Common base class for Projection and Analysis, used for internal polymorphism. ">ProjectionApplier</a> classes from storing pointer members to the registered projections, since that can lead to problems and there is no need to do so. </p>

<p class="reference">Referenced by <a class="el" href="classRivet_1_1ProjectionHandler.html#afab4a85a605cd8ba8b5dc66c515258a5">getInstance()</a>, and <a class="el" href="classRivet_1_1ProjectionApplier.html#a2981008aeeb0a023fa0e4e836407aa7a">Rivet::ProjectionApplier::getProjection()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/andy/proj/hep/rivet-31x/include/Rivet/<a class="el" href="ProjectionHandler_8hh_source.html">ProjectionHandler.hh</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 8 2020 23:46:42 for Rivet by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
